@using HaritaSite.Models.Entity
@model IEnumerable<Drawing>
@{
    ViewData["Title"] = "ListDrawing";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<h1 style="text-align:center">Çizimler</h1>
<table border="1" style="text-align:center;width:100%">
    <tr>
        <th>Id</th>
        <th>Type</th>
        <th>Coordinates</th>
        <th>Shape</th>
        <th>CreateDate</th>
        <th>Statu</th>
    </tr>        
    @foreach (var item in Model)
    {
        <tr>
            <td>@item.Id</td>
            <td>@item.Type</td>
            <td>@item.Coordinates</td>
            <td>
                <div id="map_@item.Id" style="width: 200px; height: 150px;"></div>
                <script>
                    var coordinates = @Html.Raw(Json.Serialize(item.Shape.Coordinates));
                    var map = L.map('map_@item.Id').setView([coordinates[0][1], coordinates[0][0]], 12);

                    L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                        attribution: 'OpenStreetMap'
                    }).addTo(map);

                    var polyline = L.polyline(coordinates, { color: 'blue' }).addTo(map);
                    map.fitBounds(polyline.getBounds());
                </script>
            </td>
            <td>@item.CreateDate</td>
            <td>@item.Statu</td>
        </tr>
    }
</table>
